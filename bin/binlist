#! /usr/bin/env python3
# desc = list binaries/scripts located in ~/bin
# what is the goal of this program
# list the binaries/shell scripts i've made executable and available in my ~/bin directory
import os

BINROOT = os.path.expanduser("~/bin")
files = os.listdir(BINROOT)
LARGEST_FILENAME = 0
for file in files:
    if len(file) > LARGEST_FILENAME:
        LARGEST_FILENAME = len(file)
files = [f"{BINROOT}/{file}" for file in files]
filenames_with_description = []

for file in files:
    try:
        f = open(file)
    except IsADirectoryError as e:
        continue
    desc_line = f.readlines()[1]
    if "desc" in desc_line:
        description = desc_line.split("=")[1]
        description = description.strip()
    else:
        description = "no description provided"

    filenames_with_description.append({
        "name" : file.replace(f"{BINROOT}/", ""),
        "description" : description
    })


def generate_space_gap(spaces_count):
    space = "  "
    while spaces_count > 0:
        space = space + " "
        spaces_count = spaces_count - 1
    return space

# basically a really quick hacked up table
print("Binary" + generate_space_gap((LARGEST_FILENAME - len("Binary"))) + "Description")
for file in filenames_with_description:
    spaces_count = LARGEST_FILENAME - len(file['name'])
    print(f"{file['name']}{generate_space_gap(spaces_count)}{file['description']}")
